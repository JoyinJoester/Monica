# Monica 自动填充故障排查指南

## 概述

本指南帮助您诊断和解决 Monica 自动填充功能的常见问题。

## 使用诊断工具

Monica 内置了强大的诊断工具，可以帮助您快速定位问题。

### 访问诊断工具

1. 打开 Monica 应用
2. 进入 **设置** → **自动填充**
3. 点击 **故障排查** 按钮
4. 查看诊断报告

### 诊断报告内容

诊断报告包含：
- 📱 设备信息（制造商、型号、ROM 类型）
- ⚙️ 服务状态（是否启用、权限状态）
- 📊 统计信息（成功率、响应时间）
- 📝 最近的请求记录
- ⚠️ 检测到的问题
- 💡 解决建议

### 导出日志

如果需要技术支持，可以导出日志：
1. 在诊断界面点击 **导出日志**
2. 选择分享方式
3. 发送给技术支持团队

## 常见问题及解决方案

### 问题 1: 自动填充服务未启用

**症状：**
- 看到红色警告："自动填充未启用"
- 点击登录表单时没有任何反应

**解决方案：**

#### 步骤 1: 检查系统设置
1. 打开 **系统设置**
2. 进入 **系统** → **语言和输入法** → **自动填充服务**
3. 确认选择了 **Monica**

#### 步骤 2: 重启应用
1. 完全关闭 Monica 应用
2. 重新打开应用
3. 检查状态是否变为绿色

#### 步骤 3: 重启设备
如果问题仍然存在，尝试重启设备。

### 问题 2: 没有看到密码建议

**症状：**
- 自动填充已启用
- 点击登录表单时没有密码建议

**可能原因及解决方案：**

#### 原因 1: 没有匹配的密码

**检查方法：**
1. 打开 Monica 应用
2. 搜索该应用或网站的密码
3. 确认密码条目存在

**解决方案：**
- 添加新的密码条目
- 确保填写了正确的 **网站** 或 **应用包名**

#### 原因 2: 字段识别失败

**检查方法：**
查看诊断日志中的 "字段解析" 部分。

**解决方案：**
- 尝试点击不同的输入字段
- 更新到最新版本的 Monica
- 报告问题给开发团队

#### 原因 3: 应用不兼容

**检查方法：**
在其他应用中测试自动填充是否正常。

**解决方案：**
- 查看 [兼容性列表](compatibility-list.md)
- 尝试使用浏览器访问网页版
- 等待应用更新

### 问题 3: 密码匹配不准确

**症状：**
- 显示了错误的密码建议
- 显示了不相关的密码

**解决方案：**

#### 步骤 1: 检查密码条目
1. 编辑密码条目
2. 确认 **网站** 字段填写正确
3. 对于原生应用，确认 **应用包名** 正确

#### 步骤 2: 调整匹配策略
1. 进入 **设置** → **自动填充**
2. 修改 **域名匹配策略**：
   - **精确匹配**：最严格
   - **子域名匹配**：推荐
   - **基础域名匹配**：最宽松

#### 步骤 3: 手动关联
为密码条目添加正确的应用包名：
1. 长按应用图标 → **应用信息**
2. 查看包名（通常在底部）
3. 在 Monica 中编辑密码，填写包名

### 问题 4: 自动填充响应缓慢

**症状：**
- 点击字段后需要等待很久
- 密码建议延迟显示

**解决方案：**

#### 步骤 1: 检查设备性能
- 关闭后台不必要的应用
- 清理设备存储空间
- 重启设备

#### 步骤 2: 优化密码数量
- 删除不再使用的密码
- 整理和归档旧密码
- 建议保持在 500 个以内

#### 步骤 3: 检查 ROM 兼容性
某些国产 ROM 可能需要额外配置：
- 查看 [设备特定指南](device-specific-guides.md)
- 允许 Monica 自启动
- 关闭电池优化

### 问题 5: 内联建议不显示

**症状：**
- 使用 Android 11+ 设备
- 只看到下拉菜单，没有键盘上方的建议

**可能原因：**

#### 原因 1: 设备不支持
某些设备或 ROM 不支持内联建议：
- 华为 HarmonyOS
- 部分 MIUI 版本（Android 11）
- 部分 vivo 设备（Android 11）

**解决方案：**
这是正常现象，Monica 会自动使用下拉菜单模式。

#### 原因 2: 输入法不兼容
某些输入法不支持内联建议。

**解决方案：**
- 尝试使用 Gboard 或系统默认输入法
- 更新输入法到最新版本

### 问题 6: 生物识别验证失败

**症状：**
- 选择密码后无法通过生物识别
- 提示 "验证失败"

**解决方案：**

#### 步骤 1: 检查生物识别设置
1. 进入 **系统设置** → **安全**
2. 确认指纹或面部识别已设置
3. 测试生物识别是否正常工作

#### 步骤 2: 重新注册生物识别
1. 在 Monica 中进入 **设置** → **安全**
2. 关闭生物识别
3. 重新启用并测试

#### 步骤 3: 使用备用方案
- 使用 PIN 码验证
- 使用主密码验证

### 问题 7: 保存新密码失败

**症状：**
- 输入新密码后没有保存提示
- 点击保存后没有反应

**解决方案：**

#### 步骤 1: 检查保存设置
1. 进入 **设置** → **自动填充**
2. 确认 **请求保存数据** 已启用

#### 步骤 2: 检查字段识别
- 确保表单包含用户名和密码字段
- 某些自定义表单可能无法识别

#### 步骤 3: 手动添加
如果自动保存失败，可以手动添加密码。

## 设备特定问题

### 小米 (MIUI/HyperOS)

**常见问题：**
- 自动填充服务被系统杀死
- 需要额外权限

**解决方案：**
1. 打开 **安全中心** → **应用管理** → **Monica**
2. 允许 **自启动**
3. 允许 **后台弹出界面**
4. 关闭 **省电优化**

### 华为 (EMUI/HarmonyOS)

**常见问题：**
- 内联建议不支持
- 后台限制严格

**解决方案：**
1. 打开 **手机管家** → **应用启动管理**
2. 找到 Monica，设置为 **手动管理**
3. 允许 **自启动**、**关联启动**、**后台活动**

### OPPO/Realme (ColorOS)

**常见问题：**
- 需要额外权限
- 自动填充偶尔失效

**解决方案：**
1. 进入 **设置** → **应用管理** → **Monica**
2. 允许 **自启动**
3. 允许 **后台运行**
4. 关闭 **智能省电**

### Vivo (OriginOS)

**常见问题：**
- i 管家限制
- 内联建议支持有限

**解决方案：**
1. 打开 **i 管家** → **应用管理** → **权限管理**
2. 找到 Monica
3. 允许 **自启动**
4. 允许 **后台高耗电**

### 三星 (One UI)

**常见问题：**
通常兼容性良好，很少出现问题。

**如果遇到问题：**
1. 检查 **设备维护** → **电池** → **应用电源管理**
2. 将 Monica 添加到 **未监视的应用**

## 高级诊断

### 查看系统日志

如果问题仍然无法解决，可以查看系统日志：

```bash
# 使用 ADB 查看日志
adb logcat | grep MonicaAutofill
```

### 常见日志信息

- `Service created successfully` - 服务启动成功
- `Fill request completed` - 填充请求完成
- `No credential fields found` - 未找到凭据字段
- `Found X matched passwords` - 找到 X 个匹配的密码

### 报告问题

如果问题无法解决，请报告给开发团队：

**需要提供的信息：**
1. 设备型号和 Android 版本
2. Monica 版本号
3. 问题的详细描述
4. 诊断日志（从应用中导出）
5. 问题发生的应用或网站

**报告渠道：**
- GitHub Issues
- 应用内反馈
- 电子邮件支持

## 预防措施

### 定期维护

- ✅ 保持 Monica 更新到最新版本
- ✅ 定期清理不用的密码
- ✅ 定期备份密码数据
- ✅ 检查自动填充设置

### 最佳实践

- ✅ 为每个密码正确填写网站或应用包名
- ✅ 使用推荐的匹配策略（子域名匹配）
- ✅ 启用生物识别验证
- ✅ 定期查看诊断报告

## 获取更多帮助

- 📖 [快速入门指南](quick-start-guide.md)
- 📱 [设备特定指南](device-specific-guides.md)
- ❓ [常见问题 FAQ](faq.md)
- 💬 [社区论坛](https://community.monica.app)
- 📧 [技术支持](mailto:support@monica.app)

---

**版本**: 2.0  
**更新日期**: 2024-01-01  
**适用于**: Monica 密码管理器 v2.0+
